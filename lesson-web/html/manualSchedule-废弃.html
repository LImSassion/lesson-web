<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>排课任务列表</title>
		<link rel="stylesheet" href="../bower_components/bootstrap/dist/css/bootstrap.min.css" />
		<link rel="stylesheet" href="../dist/css/AdminLTE.min.css" />
		<style type="text/css">
			td:hover{
				background-color: ghostwhite;
				cursor: pointer;
				border: #00733E 2px;
				
			}
			th td{
				margin: 5px;
			}
			th.thclass{
				background-color: ghostwhite;
			}
		</style>
		
		
		<!-- jQuery 3 -->
		<script src="../bower_components/jquery/dist/jquery.min.js"></script>
		<!-- Bootstrap 3.3.7 -->
		<script src="../bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
		<!--angular.min.js-->
		<script src="../bower_components/angularjs/angular.min.js"></script>
		
		<script>
			//jquery代码
			$(document).ready(function(){
				$("td").mousemove(function(){
					this.title = "点击添加/删除课程";
				})
			});
			
		</script>
		
		<script type="text/javascript">
    	var app = angular.module("ManualScheduleApp",[]);
    	var URI = "http://localhost:8663/lesson/";
    	app.controller("ManualScheduleController",function($scope,$http){		
    		
			$scope.nums = ['第一节','第二节','第三节','第四节','第五节','第六节','第七节'];
			
			$scope.mon = [1,2,3,4,5,6,7];
			
			$scope.mon = [{timeId:"1",teacherId:"",remark:"",teacherName:""},
						  {timeId:"2",teacherId:"",remark:"",teacherName:""},
						  {timeId:"3",teacherId:"",remark:"",teacherName:""},
						  {timeId:"4",teacherId:"",remark:"",teacherName:""},
						  {timeId:"5",teacherId:"",remark:"",teacherName:""},
						  {timeId:"6",teacherId:"",remark:"",teacherName:""},
						  {timeId:"7",teacherId:"",remark:"",teacherName:""}]
			
			
			$scope.scheduleList = [];
			
			//初始化一个entity，用于存放课程对象
			$scope.entity = {classId:701,timeId:"",teacherId:"",remark:"",teacherName:""};
			
			$scope.saveTimeId = function(timeId){
				$scope.entity.timeId = timeId;
			}
			
			//添加一门课程到列表中
			$scope.addSchedule = function(entity){
				console.log(entity);
				var index = entity.timeId-1;
				console.log("index="+index);
				
				var nomalEntity = {};
				nomalEntity.classId = entity.classId;
				nomalEntity.timeId = entity.timeId;
				nomalEntity.teacherId = entity.teacherId;
				nomalEntity.remark = entity.remark;
				console.log("nolmalEntity:"+nomalEntity);
				
				
				
				$scope.scheduleList[index] = nomalEntity;
				console.log($scope.scheduleList);
			}
			
			
			
			
			$scope.findAllClass = function(){
				$http.get(URI + "class/findAll").success(function(response){
    				$scope.classList = response;
    			});
			}
			
			$scope.findAllClassroom = function(){
				$http.get(URI + "classroom/findAll").success(function(response){
    				$scope.classroomList = response;
    			});
			}
			
			$scope.findAllCourse = function(){
				$http.get(URI + "course/findAll").success(function(response){
    				$scope.courseList = response;
    			});
			}
			
			
//			$scope.test = function(){
//				$scope.testList = [];
//				$scope.entity = {teacherId:2016,remark:"语文",timeId:10,classId:701};
//				console.log($scope.entity);
//				$scope.testList[10] = $scope.entity;
//				console.log($scope.testList);
//				
//				$scope.testList.splice(10,1);
//				console.log($scope.testList);
//			}
//		
    		
    	});
    	
    	
    	
    </script>
		
		
	</head>
	<body class="hold-transition skin-red sidebar-mini" ng-app="ManualScheduleApp" ng-controller="ManualScheduleController" ng-init="findAllTeacher();findAllClass();findAllClassroom()">
		<div class="box-header with-border">
			<h3 class="box-title">排课任务列表</h3>
		</div>
		
		<input type="button" value="测试方法" ng-click="test()" />
		
		<div class="box-body">

			
			<div class="table-box">
                
                <!--查询栏-->
                <div class="container center-block">
				   <div class="row" >
				      
				      <div class="col-md-3 col-sm-9">
				         <span>选择教师：</span>
				      </div>
				      <div class="col-md-9 col-sm-9">
				        <select name="" class="form-control" ng-model="teacherId" ng-options="teacher.teacherId as teacher.teacherName for teacher in teacherList">
                			<option value=""></option>
                		</select>
				      </div>
				      
				      <div class="col-md-2 col-sm-2">
						<input type="submit" value="排课任务列表" ng-click="selectCurriculum(teacherId)"/>				      	
				      </div>
					</div>
				</div>
                
                
                
                <br/><br/><br/>
                <!--
                	作者：1521484428@qq.com
                	时间：2019-10-15
                	描述：数据表格
                -->
                <table class="table table-bordered 	">
                	<thead>
                		<tr>
                			<th>星期  / 时间</th>
							<th ng-repeat="num in nums" class="thclass">{{num}}</th>
                		</tr>
                	</thead>
                	<tbody id="Tbody">
                		<tr id="mon">
                			<th class="thclass">星期一</th>
                			<td ng-repeat="timeId in mon" ng-click="entity={timeId:0};saveTimeId(timeId)"   
                				data-toggle="modal" data-target="#myModal">
                			</td>
                			<!--<td class="one"></td>
                			<td class="two"></td>
                			<td class="three"></td>
                			<td class="four"></td>
                			<td class="five"></td>
                			<td class="six"></td>
                			<td class="seven"></td>-->
                		</tr>
                		<tr id="tue">
                			<th class="thclass">星期二</th>
                			<td class="one"></td>
                			<td class="two"></td>
                			<td class="three"></td>
                			<td class="four"></td>
                			<td class="five"></td>
                			<td class="six"></td>
                			<td class="seven"></td>
                		</tr>
                		<tr id="wedn">
                			<th class="thclass">星期三</th>
                			<td class="one"></td>
                			<td class="two"></td>
                			<td class="three"></td>
                			<td class="four"></td>
                			<td class="five"></td>
                			<td class="six"></td>
                			<td class="seven"></td>
                		</tr>
                		<tr id="thu">
                			<th class="thclass">星期四</th>
                			<td class="one"></td>
                			<td class="two"></td>
                			<td class="three"></td>
                			<td class="four"></td>
                			<td class="five"></td>
                			<td class="six"></td>
                			<td class="seven"></td>
                		</tr>
                		<tr id="fir">
                			<th class="thclass">星期五</th>
                			<td class="one"></td>
                			<td class="two"></td>
                			<td class="three"></td>
                			<td class="four"></td>
                			<td class="five"></td>
                			<td class="six"></td>
                			<td class="seven"></td>
                		</tr>
                	</tbody>
                </table>
                <!--数据表格-->
                <td class="text-center">                                           
					<button type="button" class="btn bg-olive btn-xs" data-toggle="modal" data-target="#myModal" ng-click="findOne(row)">修改</button>                                           
				</td>
                
			</div>
			<!--table-box-->
			
		</div>
		<!--box-body-->
		
		<!-- 模态框（Modal） -->
		<div class="modal fade" id="myModal" tabindex="-1" role="dialog" 
		  	 aria-labelledby="myModalLabel" aria-hidden="true">
			   <div class="modal-dialog">
			      <div class="modal-content">
			        <div class="modal-header">
        		 		<button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
        		 		<h4 class="modal-title" id="myModalLabel">排课管理</h4>
        		 		<h3 id="myModalLabel">添加课程</h3>
        		 	</div>
        		 	<div class="modal-body">		
						<table class="table table-bordered table-striped"  width="800px">
					      	<!--<tr ng-repeat="stu in student">
					      		<td ng-hide={{$first}}>{{stu}}</td>
					      		<td ng-hide={{$first}}><input  class="form-control" placeholder="{{stu}}" ng-model="entity.{{}}" >  </td>
					      	</tr>-->	
					      	<!--{'studentId':'1', 'studentName':'lxs', 'telephoto':'13215269852', 'email':'123@163.com', 'classId':'201603102', 'remark':'无', 'studentPw':'123465'}
					      	['学生id', '姓名', '电话', '邮箱', '班级id', '备注', '密码'];-->
					      	<!--<tr>
					      		<td>班级</td>
					      		<td>
					      			<select name="" class="form-control"  ng-model="entity.classId" ng-options="class.classId  for class in classList">
			                			<option value=""></option>
			                		</select>
					      		</td>
					      	</tr>-->
					      	<tr>
					      		<td>课程</td>
					      		<!--<td><input  class="form-control" placeholder="课程" ng-model="entity.email">  </td>-->
					      		<td>
					      			<select name="" class="form-control"  ng-model="entity.remark" ng-options="">
			                			<option value=""></option>
			                			<option value="语文">语文</option>
			                			<option value="数学">数学</option>
			                			<option value="英语">英语</option>
			                			<option value="政治">政治</option>
			                		</select>
					      		</td>
					      	</tr>
					      	<tr>
					      		<td>教师</td>
					      		<td>
					      			<select name="" class="form-control"  ng-model="entity.teacherId" ng-options="">
			                			<option value=""></option>
			                			<option value="2016031">王莲</option>
			                			<option value="2016055">刘国梁</option>
			                			<option value="2016066">李撕开</option>
			                			<option value="2016089">程庆成</option>
			                		</select>
					      		</td>
					      	</tr>
					      	
						 </table>				
					</div>
					<div class="modal-footer">						
						<button class="btn btn-success" data-dismiss="modal" aria-hidden="true" ng-click="addSchedule(entity,timeId)">保存</button>
						<button class="btn btn-default" data-dismiss="modal" aria-hidden="true" ng-click="changeStatusToAdd()">关闭</button>
					</div>
        		 </div>
        	</div>
        </div>
        <!--编辑框-->
	
		
	</body>
</html>
